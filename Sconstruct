env = Environment(
    PION_HOME='dependencies/pion-net-3.0.17'
)

env.Append(
    CPPPATH=[
        'include', 
        env.subst('$PION_HOME/net/include'), 
        env.subst('$PION_HOME/common/include')
    ], 
    CCFLAGS=['-pthread', '-O3', '-Wall'],
    LINKFLAGS=['-pthread'],
    LIBS=[
        'dl',
        'z',
        'bz2',
        'log4cplus',
        'boost_thread-mt',
        'boost_system-mt',
        'boost_filesystem-mt',
        'boost_regex-mt',
        'boost_date_time-mt',
        'boost_signals-mt',
        'boost_iostreams-mt',
        'pion-net',
        'pion-common',
    ]
)

SConscript([env.subst('$PION_HOME/Sconstruct')])

# parse configuration for yaml-cpp
env.ParseConfig('pkg-config --cflags --libs yaml-cpp')

env.Program(
    'lite_comet', 
    Glob('src/*.cpp'), 
    LIBPATH=[env.subst('$PION_HOME')]
)
